*kyleking-neovim.txt*  KyleKing's Neovim Configuration

                     KyleKing's Neovim Configuration

===============================================================================
CONTENTS                                              *kyleking-neovim-contents*

    1. Introduction .......................... |kyleking-neovim-introduction|
    2. Key Mappings .......................... |kyleking-neovim-keymaps|
       2.1 General Mappings .................. |kyleking-keymaps-general|
       2.2 Leader Mappings ................... |kyleking-keymaps-leader|
       2.3 Fuzzy Finding (mini.pick) ......... |kyleking-keymaps-pick|
       2.4 LSP Mappings ...................... |kyleking-keymaps-lsp|
       2.5 Codanna (Semantic Search) ......... |kyleking-keymaps-codanna|
       2.6 Buffer Mappings ................... |kyleking-keymaps-buffer|
       2.7 Testing Mappings .................. |kyleking-keymaps-testing|
    3. Plugins ............................... |kyleking-neovim-plugins|
       3.1 mini.nvim ........................ |kyleking-plugins-mini|
       3.2 Fuzzy Finding (mini.pick) ........ |kyleking-plugins-pick|
       3.3 Codanna Semantic Search .......... |kyleking-plugins-codanna|
       3.4 patch_it.nvim .................... |kyleking-plugins-patchit|
       3.5 LSP Support ...................... |kyleking-plugins-lsp|
       3.6 Colorscheme & UI ................. |kyleking-plugins-ui|
       3.7 File Explorer .................... |kyleking-plugins-explorer|
       3.8 Git Integration .................. |kyleking-plugins-git|
       3.9 Terminal Integration ............. |kyleking-plugins-terminal|
    4. Custom Commands ....................... |kyleking-neovim-commands|
    5. Testing Framework ..................... |kyleking-neovim-testing|

===============================================================================
1. INTRODUCTION                                    *kyleking-neovim-introduction*

This is the documentation for KyleKing's Neovim configuration.

The configuration is organized in a modular structure:
- Core settings in `lua/kyleking/core/`
- Plugins managed by mini.deps in `lua/kyleking/deps/`
- Custom utilities in `lua/kyleking/custom/`

Leader key: <Space>    Local leader: ","

===============================================================================
2. KEY MAPPINGS                                        *kyleking-neovim-keymaps*

This section documents all key mappings configured in the setup.

-------------------------------------------------------------------------------
2.1 General Mappings                                  *kyleking-keymaps-general*

<Esc>           Clear search highlighting
<C-s>           Force write the current buffer
<C-q>           Force quit
k / j           Smart movement with word wrap

Special text objects:
  A             Select whole buffer (e.g., dA, yA)

-------------------------------------------------------------------------------
2.2 Leader Mappings                                   *kyleking-keymaps-leader*

<leader>w       Save if modified
<leader>W       Save all
<leader>q       Confirm quit
<leader>Q       Confirm quit all
<leader>n       New file

Register operations:
<leader>ry      Yank to * register
<leader>rp      Paste from * register
<leader>rY      Yank to + register
<leader>rP      Paste from + register

UI toggles:
<leader>us      Toggle spell check
<leader>uw      Toggle line wrapping

Tab operations:
<leader>ttn     New tab
<leader>ttc     Close tab

-------------------------------------------------------------------------------
2.3 Fuzzy Finding (mini.pick)                           *kyleking-keymaps-pick*

Core pickers:
<leader><CR>    Resume last picker
<leader>;       Find in open buffers

Buffer related:
<leader>bb      Find word in current buffer
<leader>bL      Find lines across all buffers
<leader>br      Find recently opened files

Git operations:
<leader>gf      Find in git files

File operations:
<leader>ff      Find in files
<leader>fe      Explore files with picker
<leader>fw      Find word in files (live grep)
<leader>f*      Find word from visual selection (visual mode)

Other pickers:
<leader>fB      Find in pickers (list all available pickers)
<leader>f'      Find marks
<leader>fC      Find commands
<leader>fh      Find in nvim help
<leader>fH      Find in command/search history
<leader>fk      Find keymaps
<leader>fl      Find in quickfix/location lists
<leader>fr      Find registers

Inside mini.pick windows:
<C-j>           Move down
<C-k>           Move up
<C-Space>       Refine results

-------------------------------------------------------------------------------
2.4 LSP Mappings                                       *kyleking-keymaps-lsp*

<leader>ld      Find in diagnostics
<leader>lgd     Go to definition
<leader>lgi     Go to implementation
<leader>lgr     Find references
<leader>lgs     Find document symbols
<leader>lgt     Go to type definition

-------------------------------------------------------------------------------
2.5 Codanna (Semantic Search)                       *kyleking-keymaps-codanna*

Semantic search operations complement LSP with cross-file analysis.
Capital letters distinguish semantic operations from LSP equivalents.

Prefix: <leader>ls

<leader>lsc     Calls FROM symbol (outgoing calls)
<leader>lsC     Callers OF symbol (incoming calls)
<leader>lsd     Search documentation
<leader>lsi     Impact analysis (what code is affected by this symbol)
<leader>lss     Semantic search (natural language code queries)
<leader>lsS     Browse symbols

When to use codanna vs LSP:
- LSP (`<leader>lg*`): quick navigation, definitions, references
- Codanna (`<leader>ls*`): cross-file impact, call hierarchies, NL queries

Requires the `codanna` CLI. Install via `cargo install codanna` or binary
release. Configuration in `lua/kyleking/deps/fuzzy-finder.lua`.

Supported languages: Rust, Python, JS, TS, Go, Java, C, C++, C#, Swift,
Kotlin, PHP, GDScript. Limited value for Lua and Bash.

-------------------------------------------------------------------------------
2.6 Buffer Mappings                                  *kyleking-keymaps-buffer*

<leader>bw      Wipeout buffer (including marks)
<leader>bW      Wipeout all buffers (including marks)

-------------------------------------------------------------------------------
2.7 Testing Mappings                                *kyleking-keymaps-testing*

<leader>ta      Run all tests
<leader>tf      Run failed tests

===============================================================================
3. PLUGINS                                            *kyleking-neovim-plugins*

All plugins are managed through mini.deps, not lazy.nvim. Each `deps/*.lua`
file groups related plugins by functionality.

-------------------------------------------------------------------------------
3.1 mini.nvim                                          *kyleking-plugins-mini*

The configuration uses mini.nvim modules heavily instead of standalone plugins:
mini.pick (fuzzy finder), mini.files (file explorer), mini.diff/mini.git
(git), mini.hipatterns (keyword highlights), mini.surround, mini.move,
mini.clue (which-key), mini.comment, mini.trailspace, and more.

-------------------------------------------------------------------------------
3.2 Fuzzy Finding (mini.pick)                          *kyleking-plugins-pick*

Fuzzy finding uses mini.pick and mini.extra pickers. Configured in
`lua/kyleking/deps/fuzzy-finder.lua`.

See |kyleking-keymaps-pick| for all key mappings.

-------------------------------------------------------------------------------
3.3 Codanna Semantic Search                         *kyleking-plugins-codanna*

Codanna provides semantic code understanding beyond syntactic search.
Configured in `lua/kyleking/deps/fuzzy-finder.lua`.

Setup: >lua
    require("codanna").setup({
        picker = "mini.pick",
        timeout = 5000,
        cache_results = true,
    })
<

See |kyleking-keymaps-codanna| for keybindings and usage guidance.

Troubleshooting:
- Plugin fails to load: verify `codanna` CLI with `which codanna`
- Slow queries: increase timeout or run `codanna index` if supported
- No results: check language support and ensure code is indexed

-------------------------------------------------------------------------------
3.4 patch_it.nvim                                   *kyleking-plugins-patchit*

Apply LLM-generated patches with fuzzy matching. Configured in
`lua/kyleking/deps/utility.lua`.

Keybindings:

<leader>paa     Apply patch - prompts for target file, applies buffer
<leader>pap     Preview patch - dry-run showing what would change
<leader>pab     Apply with auto-suggest - suggests target from buffer name

Workflow: ~

1. Get an LLM-generated patch (from Claude, Code Rabbit, etc.)
2. Paste into a buffer (`:enew` then paste; no save needed)
3. Preview with `<leader>pap`, enter target file path
4. Apply with `<leader>paa` if satisfied
5. Undo with `u` if incorrect

Features:
- Fuzzy matching tolerates whitespace differences
- Accepts patches with or without space-prefixed context lines
- Handles interleaved additions and removals within a hunk
- Single-hunk, single-file per patch (apply one at a time)

Lua API: >lua
    local patch_it = require("patch_it")
    patch_it.apply(patch_string, "target.lua")
    patch_it.apply_buffer("target.lua")
    patch_it.apply_buffer("target.lua", { preview = true })
<
Command: `:PatchApply path/to/target.lua`

-------------------------------------------------------------------------------
3.5 LSP Support                                        *kyleking-plugins-lsp*

LSP configurations are in `lua/kyleking/deps/lsp.lua`.
See |kyleking-keymaps-lsp| for key mappings.

-------------------------------------------------------------------------------
3.6 Colorscheme & UI                                     *kyleking-plugins-ui*

The configuration uses nightfox colorscheme with custom highlights for
line numbers, configured in `lua/kyleking/deps/colorscheme.lua`.

Theme colors are accessed via `require("kyleking.theme").get_colors()`.

-------------------------------------------------------------------------------
3.7 File Explorer                                  *kyleking-plugins-explorer*

File explorer uses mini.files. Configured in
`lua/kyleking/deps/file-explorer.lua`.

-------------------------------------------------------------------------------
3.8 Git Integration                                    *kyleking-plugins-git*

Git integration via mini.diff, mini.git, and additional plugins.
Configured in `lua/kyleking/deps/git.lua`.

-------------------------------------------------------------------------------
3.9 Terminal Integration                           *kyleking-plugins-terminal*

Terminal integration allows for using terminal features within Neovim.
Configured in `lua/kyleking/deps/terminal-integration.lua`.

===============================================================================
4. CUSTOM COMMANDS                                  *kyleking-neovim-commands*

:RunAllTests    Run all Mini.test test files
:RunFailedTests Run only failed tests from last run
:PatchApply     Apply patch from current buffer to target file

===============================================================================
5. TESTING FRAMEWORK                                 *kyleking-neovim-testing*

Tests use mini.test (not plenary or busted). Test files live in `lua/tests/`
and follow `*_spec.lua` naming.

Key mappings for testing:
<leader>ta      Run all tests
<leader>tf      Run failed tests

Commands for testing:
:RunAllTests    Run all Mini.test test files
:RunFailedTests Run only failed tests from last run

From command line: >bash
    nvim --headless -c "lua MiniTest.run()" -c "qall!"
    nvim --headless -c "lua MiniTest.run_file('lua/tests/core/smoke_spec.lua')" -c "qall!"
<

===============================================================================
vim:tw=78:ts=8:ft=help:norl:
